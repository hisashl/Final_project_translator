{"version":3,"file":"WidgetTextInput.js","names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativeReanimated","_styles","_utils","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_extends","assign","bind","target","arguments","length","source","key","apply","Animated","addWhitelistedNativeProps","text","AnimatedTextInput","createAnimatedComponent","TextInput","WidgetTextInput","textValue","decimal","textKeyboard","title","inputStyle","textStyle","inputProps","onEndEditing","inputRef","useAnimatedRef","animatedProps","useAnimatedProps","value","submit","nativeEvent","num","parseFloat","isNaN","isFinite","useEffect","hideSubscription","Keyboard","addListener","current","blur","remove","useDerivedValue","isWeb","createElement","View","style","styles","inputsContainer","ref","input","defaultValue","maxLength","onBlur","undefined","enterKeyHint","returnKeyType","keyboardType","inputMode","autoComplete","autoCorrect","autoFocus","selectTextOnFocus","Text","inputTitle"],"sources":["../../../../src/components/InputWidget/Widgets/WidgetTextInput.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Keyboard, Text, TextInput, View } from 'react-native';\nimport Animated, { useAnimatedProps, useAnimatedRef, useDerivedValue } from 'react-native-reanimated';\n\nimport { styles } from '../../../styles';\nimport { isWeb } from '../../../utils';\n\nimport type { InputProps } from '../../../types';\nimport type { NativeSyntheticEvent, StyleProp, TextInputSubmitEditingEventData, TextStyle } from 'react-native';\nimport type { SharedValue } from 'react-native-reanimated';\n\ntype Props = {\n  textValue: SharedValue<string>;\n  textKeyboard?: boolean;\n  decimal?: boolean;\n  title: string;\n  inputStyle: StyleProp<TextStyle>;\n  textStyle: StyleProp<TextStyle>;\n  onEndEditing: (text: string) => void;\n  inputProps: InputProps;\n};\n\nAnimated.addWhitelistedNativeProps({ text: true });\nconst AnimatedTextInput = Animated.createAnimatedComponent(TextInput);\n\nexport default function WidgetTextInput({\n  textValue,\n  decimal = false,\n  textKeyboard = false,\n  title,\n  inputStyle,\n  textStyle,\n  inputProps,\n  onEndEditing,\n}: Props) {\n  const inputRef = useAnimatedRef<TextInput>();\n\n  const animatedProps = useAnimatedProps(() => ({ text: textValue.value }) as never, [textValue]);\n\n  const submit = (e: NativeSyntheticEvent<TextInputSubmitEditingEventData>) => {\n    const text = e.nativeEvent.text;\n\n    // number input mode\n    if (decimal || !textKeyboard) {\n      const num = parseFloat(text);\n      if (typeof num !== 'number' || isNaN(num) || !isFinite(num)) {\n        textValue.value = ''; // reset input\n        return;\n      }\n    }\n\n    onEndEditing(text);\n  };\n\n  useEffect(() => {\n    const hideSubscription = Keyboard.addListener('keyboardDidHide', () => {\n      if (!inputRef.current) return;\n      inputRef.current.blur();\n    });\n\n    return () => hideSubscription.remove();\n  }, []);\n\n  // For web platform only\n  useDerivedValue(() => {\n    if (!isWeb || !inputRef.current) return;\n\n    // @ts-expect-error value doesn't exist\n    inputRef.current.value = textValue.value;\n  }, [textValue]);\n\n  return (\n    <View style={styles.inputsContainer}>\n      <AnimatedTextInput\n        ref={inputRef}\n        style={[styles.input, inputStyle]}\n        defaultValue={textValue.value}\n        maxLength={decimal ? 4 : textKeyboard ? 9 : 3} // length example: Alpha (1.55), RGB (255), Hue (360), Brightness (100), hex (#00000000)\n        onEndEditing={submit}\n        onBlur={isWeb ? submit : undefined}\n        enterKeyHint='enter'\n        returnKeyType='done'\n        keyboardType={decimal ? 'decimal-pad' : textKeyboard ? 'default' : 'number-pad'}\n        inputMode={decimal ? 'decimal' : textKeyboard ? 'text' : 'numeric'}\n        autoComplete='off'\n        autoCorrect={false}\n        autoFocus={false}\n        {...inputProps}\n        selectTextOnFocus={!textKeyboard}\n        animatedProps={animatedProps}\n      />\n      <Text style={[styles.inputTitle, textStyle]}>{title}</Text>\n    </View>\n  );\n}\n"],"mappings":"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"}