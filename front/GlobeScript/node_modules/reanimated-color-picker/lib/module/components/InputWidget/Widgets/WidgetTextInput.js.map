{"version":3,"file":"WidgetTextInput.js","names":["React","useEffect","Keyboard","Text","TextInput","View","Animated","useAnimatedProps","useAnimatedRef","useDerivedValue","styles","isWeb","addWhitelistedNativeProps","text","AnimatedTextInput","createAnimatedComponent","WidgetTextInput","textValue","decimal","textKeyboard","title","inputStyle","textStyle","inputProps","onEndEditing","inputRef","animatedProps","value","submit","e","nativeEvent","num","parseFloat","isNaN","isFinite","hideSubscription","addListener","current","blur","remove","createElement","style","inputsContainer","_extends","ref","input","defaultValue","maxLength","onBlur","undefined","enterKeyHint","returnKeyType","keyboardType","inputMode","autoComplete","autoCorrect","autoFocus","selectTextOnFocus","inputTitle"],"sources":["../../../../src/components/InputWidget/Widgets/WidgetTextInput.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Keyboard, Text, TextInput, View } from 'react-native';\nimport Animated, { useAnimatedProps, useAnimatedRef, useDerivedValue } from 'react-native-reanimated';\n\nimport { styles } from '../../../styles';\nimport { isWeb } from '../../../utils';\n\nimport type { InputProps } from '../../../types';\nimport type { NativeSyntheticEvent, StyleProp, TextInputSubmitEditingEventData, TextStyle } from 'react-native';\nimport type { SharedValue } from 'react-native-reanimated';\n\ntype Props = {\n  textValue: SharedValue<string>;\n  textKeyboard?: boolean;\n  decimal?: boolean;\n  title: string;\n  inputStyle: StyleProp<TextStyle>;\n  textStyle: StyleProp<TextStyle>;\n  onEndEditing: (text: string) => void;\n  inputProps: InputProps;\n};\n\nAnimated.addWhitelistedNativeProps({ text: true });\nconst AnimatedTextInput = Animated.createAnimatedComponent(TextInput);\n\nexport default function WidgetTextInput({\n  textValue,\n  decimal = false,\n  textKeyboard = false,\n  title,\n  inputStyle,\n  textStyle,\n  inputProps,\n  onEndEditing,\n}: Props) {\n  const inputRef = useAnimatedRef<TextInput>();\n\n  const animatedProps = useAnimatedProps(() => ({ text: textValue.value }) as never, [textValue]);\n\n  const submit = (e: NativeSyntheticEvent<TextInputSubmitEditingEventData>) => {\n    const text = e.nativeEvent.text;\n\n    // number input mode\n    if (decimal || !textKeyboard) {\n      const num = parseFloat(text);\n      if (typeof num !== 'number' || isNaN(num) || !isFinite(num)) {\n        textValue.value = ''; // reset input\n        return;\n      }\n    }\n\n    onEndEditing(text);\n  };\n\n  useEffect(() => {\n    const hideSubscription = Keyboard.addListener('keyboardDidHide', () => {\n      if (!inputRef.current) return;\n      inputRef.current.blur();\n    });\n\n    return () => hideSubscription.remove();\n  }, []);\n\n  // For web platform only\n  useDerivedValue(() => {\n    if (!isWeb || !inputRef.current) return;\n\n    // @ts-expect-error value doesn't exist\n    inputRef.current.value = textValue.value;\n  }, [textValue]);\n\n  return (\n    <View style={styles.inputsContainer}>\n      <AnimatedTextInput\n        ref={inputRef}\n        style={[styles.input, inputStyle]}\n        defaultValue={textValue.value}\n        maxLength={decimal ? 4 : textKeyboard ? 9 : 3} // length example: Alpha (1.55), RGB (255), Hue (360), Brightness (100), hex (#00000000)\n        onEndEditing={submit}\n        onBlur={isWeb ? submit : undefined}\n        enterKeyHint='enter'\n        returnKeyType='done'\n        keyboardType={decimal ? 'decimal-pad' : textKeyboard ? 'default' : 'number-pad'}\n        inputMode={decimal ? 'decimal' : textKeyboard ? 'text' : 'numeric'}\n        autoComplete='off'\n        autoCorrect={false}\n        autoFocus={false}\n        {...inputProps}\n        selectTextOnFocus={!textKeyboard}\n        animatedProps={animatedProps}\n      />\n      <Text style={[styles.inputTitle, textStyle]}>{title}</Text>\n    </View>\n  );\n}\n"],"mappings":"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"}