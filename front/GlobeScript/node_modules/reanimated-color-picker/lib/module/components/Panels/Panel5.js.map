{"version":3,"file":"Panel5.js","names":["React","useCallback","ImageBackground","Gesture","GestureDetector","Animated","Easing","useAnimatedStyle","useDerivedValue","useSharedValue","withDelay","withTiming","colorKit","usePickerContext","styles","getStyle","isRtl","animationOptions","duration","easing","elastic","Panel5","gestures","style","selectionStyle","hueValue","saturationValue","brightnessValue","onGestureChange","onGestureEnd","borderRadius","squareSize","posX","posY","adaptiveColor","isTap","setAdaptiveColor","color1","color","value","contrast","runOnUI","contrastRatio","hsvColor","h","s","v","y","gridColors","length","x","gridColor","areColorsEqual","selectedStyle","width","height","top","left","undefined","right","borderColor","tap","Tap","onBegin","_gridColors$row","row","Math","floor","column","HSV","object","composed","Simultaneous","onLayout","nativeEvent","layout","createElement","gesture","source","require","position","borderWidth","padding","aspectRatio","imageStyle","resizeMode","View","selected"],"sources":["../../../src/components/Panels/Panel5.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { ImageBackground } from 'react-native';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\nimport Animated, {\n  Easing,\n  useAnimatedStyle,\n  useDerivedValue,\n  useSharedValue,\n  withDelay,\n  withTiming,\n} from 'react-native-reanimated';\n\nimport colorKit from '../../colorKit/index';\nimport usePickerContext from '../../AppContext';\nimport { styles } from '../../styles';\nimport { getStyle, isRtl } from '../../utils';\n\nimport type { Panel5Props } from '../../types';\nimport type { LayoutChangeEvent } from 'react-native';\n\nconst animationOptions = { duration: 300, easing: Easing.elastic(0.8) };\n\n/** - This is a grid of 120 colors, arranged in 12 columns and 10 rows of squares. */\nexport function Panel5({ gestures = [], style = {}, selectionStyle = {} }: Panel5Props) {\n  const { hueValue, saturationValue, brightnessValue, onGestureChange, onGestureEnd } = usePickerContext();\n\n  const borderRadius = getStyle(style, 'borderRadius') ?? 0;\n\n  const squareSize = useSharedValue(0),\n    posX = useSharedValue(0),\n    posY = useSharedValue(0),\n    adaptiveColor = useSharedValue('#000'),\n    isTap = useSharedValue<0 | 1>(0);\n\n  const setAdaptiveColor = (color1: string) => {\n    'worklet';\n    const color = adaptiveColor.value === '#ffffff' ? '#000000' : '#ffffff';\n    const contrast = colorKit.runOnUI().contrastRatio(color1, adaptiveColor.value);\n    adaptiveColor.value = contrast < 4.5 ? color : adaptiveColor.value;\n  };\n\n  // To apply color changes that are not triggered by the tap gesture\n  useDerivedValue(() => {\n    if (isTap.value === 1) return;\n\n    const hsvColor = { h: hueValue.value, s: saturationValue.value, v: brightnessValue.value };\n\n    for (let y = 0; y < gridColors.length; y++) {\n      for (let x = 0; x < gridColors[y].length; x++) {\n        const gridColor = gridColors[y][x];\n        const areColorsEqual = colorKit.runOnUI().areColorsEqual(gridColor, hsvColor, 6);\n        if (!areColorsEqual) continue;\n        setAdaptiveColor(gridColor);\n        posX.value = withTiming(x, animationOptions);\n        posY.value = withTiming(y, animationOptions);\n        break;\n      }\n    }\n  }, [hueValue, saturationValue, brightnessValue, isTap, posX, posY]);\n\n  const selectedStyle = useAnimatedStyle(() => {\n    const x = posX.value * squareSize.value;\n    const y = posY.value * squareSize.value;\n\n    return {\n      width: squareSize.value,\n      height: squareSize.value,\n      top: y,\n      left: isRtl ? undefined : x,\n      right: isRtl ? x : undefined,\n      borderColor: adaptiveColor.value,\n    };\n  }, [squareSize, adaptiveColor, posX, posY]);\n\n  const tap = Gesture.Tap().onBegin(({ x, y }) => {\n    if (!squareSize.value) return;\n\n    const row = Math.floor(y / squareSize.value);\n    const column = Math.floor(x / squareSize.value);\n\n    const color: string | undefined = gridColors[row]?.[column];\n    if (!color) return;\n\n    isTap.value = 1;\n\n    const { h, s, v } = colorKit.runOnUI().HSV(color).object(false);\n    hueValue.value = h;\n    saturationValue.value = s;\n    brightnessValue.value = v;\n\n    posX.value = withTiming(column, animationOptions);\n    posY.value = withTiming(row, animationOptions);\n\n    setAdaptiveColor(color);\n    onGestureChange();\n    onGestureEnd();\n\n    isTap.value = withDelay(300, withTiming(0, { duration: 0 }));\n  });\n\n  const composed = Gesture.Simultaneous(tap, ...gestures);\n\n  const onLayout = useCallback(({ nativeEvent: { layout } }: LayoutChangeEvent) => {\n    squareSize.value = withTiming(layout.width / 12 || layout.height / 10, { duration: 100 });\n  }, []);\n\n  return (\n    <GestureDetector gesture={composed}>\n      <ImageBackground\n        source={require('../../assets/grid.png')}\n        onLayout={onLayout}\n        style={[style, { position: 'relative', borderWidth: 0, padding: 0, aspectRatio: 1.2 }]}\n        imageStyle={{ borderRadius }}\n        resizeMode='stretch'\n      >\n        <Animated.View style={[styles.selected, selectionStyle, selectedStyle]} />\n      </ImageBackground>\n    </GestureDetector>\n  );\n}\n\nconst gridColors = [\n  [\n    '#FFFFFF',\n    '#EBEBEB',\n    '#D6D6D6',\n    '#C2C2C2',\n    '#ADADAD',\n    '#999999',\n    '#858585',\n    '#707070',\n    '#5C5C5C',\n    '#474747',\n    '#333333',\n    '#000000',\n  ],\n  [\n    '#00374A',\n    '#011D57',\n    '#11053B',\n    '#2E063D',\n    '#3C071B',\n    '#5C0701',\n    '#5A1C00',\n    '#583300',\n    '#563D00',\n    '#666100',\n    '#4F5504',\n    '#263E0F',\n  ],\n  [\n    '#004D65',\n    '#012F7B',\n    '#1A0A52',\n    '#450D59',\n    '#551029',\n    '#831100',\n    '#7B2900',\n    '#7A4A00',\n    '#785800',\n    '#8D8602',\n    '#6F760A',\n    '#38571A',\n  ],\n  [\n    '#016E8F',\n    '#0042A9',\n    '#2C0977',\n    '#61187C',\n    '#791A3D',\n    '#B51A00',\n    '#AD3E00',\n    '#A96800',\n    '#A67B01',\n    '#C4BC00',\n    '#9BA50E',\n    '#4E7A27',\n  ],\n  [\n    '#008CB4',\n    '#0056D6',\n    '#371A94',\n    '#7A219E',\n    '#99244F',\n    '#E22400',\n    '#DA5100',\n    '#D38301',\n    '#D19D01',\n    '#F5EC00',\n    '#C3D117',\n    '#669D34',\n  ],\n  [\n    '#00A1D8',\n    '#0061FD',\n    '#4D22B2',\n    '#982ABC',\n    '#B92D5D',\n    '#FF4015',\n    '#FF6A00',\n    '#FFAB01',\n    '#FCC700',\n    '#FEFB41',\n    '#D9EC37',\n    '#76BB40',\n  ],\n  [\n    '#01C7FC',\n    '#3A87FD',\n    '#5E30EB',\n    '#BE38F3',\n    '#E63B7A',\n    '#FE6250',\n    '#FE8648',\n    '#FEB43F',\n    '#FECB3E',\n    '#FFF76B',\n    '#E4EF65',\n    '#96D35F',\n  ],\n  [\n    '#52D6FC',\n    '#74A7FF',\n    '#864FFD',\n    '#D357FE',\n    '#EE719E',\n    '#FF8C82',\n    '#FEA57D',\n    '#FEC777',\n    '#FED977',\n    '#FFF994',\n    '#EAF28F',\n    '#B1DD8B',\n  ],\n  [\n    '#93E3FC',\n    '#A7C6FF',\n    '#B18CFE',\n    '#E292FE',\n    '#F4A4C0',\n    '#FFB5AF',\n    '#FFC5AB',\n    '#FED9A8',\n    '#FDE4A8',\n    '#FFFBB9',\n    '#F1F7B7',\n    '#CDE8B5',\n  ],\n  [\n    '#CBF0FF',\n    '#D2E2FE',\n    '#D8C9FE',\n    '#EFCAFE',\n    '#F9D3E0',\n    '#FFDAD8',\n    '#FFE2D6',\n    '#FEECD4',\n    '#FEF1D5',\n    '#FDFBDD',\n    '#F6FADB',\n    '#DEEED4',\n  ],\n];\n"],"mappings":"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AS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,CACV,EACD,CACE,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,CACV,EACD,CACE,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,CACV,EACD,CACE,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,CACV,EACD,CACE,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,CACV,EACD,CACE,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,CACV,EACD,CACE,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,EACT,SAAS,CACV,CACF"}