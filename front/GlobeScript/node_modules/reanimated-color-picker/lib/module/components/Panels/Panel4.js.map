{"version":3,"file":"Panel4.js","names":["React","useCallback","Image","View","Gesture","GestureDetector","Animated","useAnimatedStyle","useSharedValue","withTiming","usePickerContext","styles","Thumb","clamp","getStyle","isRtl","Panel4","reverseHue","reverseHorizontalChannels","gestures","style","props","hueValue","saturationValue","brightnessValue","onGestureChange","onGestureEnd","ctx","thumbShape","thumbSize","thumbColor","boundedThumb","renderThumb","thumbStyle","thumbScaleAnimationValue","thumbScaleUpValue","thumbScaleAnimationDuration","thumbScaleUpDuration","thumbInnerStyle","borderRadius","getHeight","width","height","handleScale","handleStyle","length","x","value","y","calcThumb","lum","posPercentX","posX","percentY","posY","transform","translateX","translateY","scale","panelImageStyle","scaleY","rotate","onGestureUpdate","lengthX","lengthY","valueX","valueY","newHueValue","newSaturationValue","newBrightnessValue","onGestureBegin","event","duration","onGestureFinish","pan","Pan","onBegin","onUpdate","onEnd","tap","Tap","longPress","LongPress","composed","Simultaneous","Exclusive","onLayout","nativeEvent","layout","createElement","gesture","panel_container","position","borderWidth","padding","source","require","panel_image","resizeMode","flexDirection","scaleX","flex","tintColor","innerStyle"],"sources":["../../../src/components/Panels/Panel4.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { Image, View } from 'react-native';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\nimport Animated, { useAnimatedStyle, useSharedValue, withTiming } from 'react-native-reanimated';\n\nimport usePickerContext from '../../AppContext';\nimport { styles } from '../../styles';\nimport Thumb from '../Thumb/Thumb';\nimport { clamp, getStyle, isRtl } from '../../utils';\n\nimport type { Panel4Props } from '../../types';\nimport type { LayoutChangeEvent } from 'react-native';\nimport type { PanGestureHandlerEventPayload } from 'react-native-gesture-handler';\n\n/** - A slider with a square shape is used to adjust the channels of hue, saturation, and brightness. */\nexport function Panel4({\n  reverseHue = false,\n  reverseHorizontalChannels = false,\n  gestures = [],\n  style = {},\n  ...props\n}: Panel4Props) {\n  const { hueValue, saturationValue, brightnessValue, onGestureChange, onGestureEnd, ...ctx } = usePickerContext();\n\n  const thumbShape = props.thumbShape ?? ctx.thumbShape,\n    thumbSize = props.thumbSize ?? ctx.thumbSize,\n    thumbColor = props.thumbColor ?? ctx.thumbColor,\n    boundedThumb = props.boundedThumb ?? ctx.boundedThumb,\n    renderThumb = props.renderThumb ?? ctx.renderThumb,\n    thumbStyle = props.thumbStyle ?? ctx.thumbStyle ?? {},\n    thumbScaleAnimationValue = props.thumbScaleUpValue ?? ctx.thumbScaleAnimationValue,\n    thumbScaleAnimationDuration = props.thumbScaleUpDuration ?? ctx.thumbScaleAnimationDuration,\n    thumbInnerStyle = props.thumbInnerStyle ?? ctx.thumbInnerStyle ?? {};\n\n  const borderRadius = getStyle(style, 'borderRadius') ?? 5;\n  const getHeight = getStyle(style, 'height') ?? 200;\n\n  const width = useSharedValue(0);\n  const height = useSharedValue(0);\n  const handleScale = useSharedValue(1);\n\n  const handleStyle = useAnimatedStyle(() => {\n    const length = { x: width.value - (boundedThumb ? thumbSize : 0), y: height.value - (boundedThumb ? thumbSize : 0) },\n      calcThumb = boundedThumb ? 0 : thumbSize / 2,\n      // luminance\n      lum = (((2 - saturationValue.value / 100) * (brightnessValue.value / 100)) / 2) * 100,\n      posPercentX = (lum / 100) * length.x,\n      posX = (reverseHorizontalChannels ? posPercentX : length.x - posPercentX) - calcThumb,\n      // hue\n      percentY = (hueValue.value / 360) * length.y,\n      posY = (reverseHue ? percentY : length.y - percentY) - calcThumb;\n\n    return {\n      transform: [{ translateX: posX }, { translateY: posY }, { scale: handleScale.value }],\n    };\n  }, [width, height, saturationValue, brightnessValue, hueValue, handleScale]);\n\n  const panelImageStyle = useAnimatedStyle(() => {\n    return {\n      width: height.value,\n      height: width.value,\n      transform: [\n        { scaleY: reverseHue ? -1 : 1 },\n        { rotate: '270deg' },\n        { translateX: ((width.value - height.value) / 2) * (reverseHue ? -1 : 1) },\n        { translateY: ((width.value - height.value) / 2) * (isRtl ? -1 : 1) },\n      ],\n    };\n  }, [height, width]);\n\n  const onGestureUpdate = ({ x, y }: PanGestureHandlerEventPayload) => {\n    'worklet';\n\n    const lengthX = width.value - (boundedThumb ? thumbSize : 0),\n      lengthY = height.value - (boundedThumb ? thumbSize : 0),\n      posX = clamp(x - (boundedThumb ? thumbSize / 2 : 0), lengthX),\n      posY = clamp(y - (boundedThumb ? thumbSize / 2 : 0), lengthY),\n      valueX = (posX / lengthX) * 200,\n      valueY = (posY / lengthY) * 360,\n      newHueValue = reverseHue ? valueY : 360 - valueY,\n      newSaturationValue = clamp(reverseHorizontalChannels ? 200 - valueX : valueX, 100),\n      newBrightnessValue = clamp(reverseHorizontalChannels ? valueX : 200 - valueX, 100);\n\n    if (\n      hueValue.value === newHueValue &&\n      saturationValue.value === newSaturationValue &&\n      brightnessValue.value === newBrightnessValue\n    )\n      return;\n\n    hueValue.value = newHueValue;\n    saturationValue.value = newSaturationValue;\n    brightnessValue.value = newBrightnessValue;\n\n    onGestureChange();\n  };\n\n  const onGestureBegin = (event: PanGestureHandlerEventPayload) => {\n    'worklet';\n    handleScale.value = withTiming(thumbScaleAnimationValue, { duration: thumbScaleAnimationDuration });\n    onGestureUpdate(event);\n  };\n\n  const onGestureFinish = () => {\n    'worklet';\n    handleScale.value = withTiming(1, { duration: thumbScaleAnimationDuration });\n    onGestureEnd();\n  };\n\n  const pan = Gesture.Pan().onBegin(onGestureBegin).onUpdate(onGestureUpdate).onEnd(onGestureFinish);\n  const tap = Gesture.Tap().onEnd(onGestureFinish);\n  const longPress = Gesture.LongPress().onEnd(onGestureFinish);\n  const composed = Gesture.Simultaneous(Gesture.Exclusive(pan, tap, longPress), ...gestures);\n\n  const onLayout = useCallback(({ nativeEvent: { layout } }: LayoutChangeEvent) => {\n    width.value = layout.width;\n    height.value = layout.height;\n  }, []);\n\n  return (\n    <GestureDetector gesture={composed}>\n      <Animated.View\n        onLayout={onLayout}\n        style={[styles.panel_container, { height: getHeight }, style, { position: 'relative', borderWidth: 0, padding: 0 }]}\n      >\n        <Animated.Image\n          source={require('../../assets/Hue.png')}\n          style={[styles.panel_image, { borderRadius }, panelImageStyle]}\n          resizeMode='stretch'\n        />\n\n        <View\n          style={[\n            styles.panel_image,\n            {\n              borderRadius,\n              flexDirection: isRtl ? 'row-reverse' : 'row',\n              transform: [{ scaleX: reverseHorizontalChannels ? -1 : 1 }],\n            },\n          ]}\n        >\n          <Image source={require('../../assets/blackGradient.png')} style={{ flex: 1, tintColor: '#fff' }} resizeMode='stretch' />\n          <Image\n            source={require('../../assets/blackGradient.png')}\n            style={{ flex: 1, transform: [{ scaleX: -1 }] }}\n            resizeMode='stretch'\n          />\n        </View>\n\n        <Thumb\n          thumbShape={thumbShape}\n          thumbSize={thumbSize}\n          thumbColor={thumbColor}\n          renderThumb={renderThumb}\n          innerStyle={thumbInnerStyle}\n          handleStyle={handleStyle}\n          style={thumbStyle}\n        />\n      </Animated.View>\n    </GestureDetector>\n  );\n}\n"],"mappings":"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"}