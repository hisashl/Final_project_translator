{"version":3,"file":"Panel1.js","names":["React","useCallback","Image","View","Gesture","GestureDetector","Animated","useAnimatedStyle","useSharedValue","withTiming","usePickerContext","styles","Thumb","clamp","getStyle","isRtl","Panel1","gestures","style","props","hueValue","saturationValue","brightnessValue","onGestureChange","onGestureEnd","ctx","thumbShape","thumbSize","thumbColor","boundedThumb","renderThumb","thumbStyle","thumbScaleAnimationValue","thumbScaleUpValue","thumbScaleAnimationDuration","thumbScaleUpDuration","thumbInnerStyle","borderRadius","getHeight","width","height","handleScale","handleStyle","length","x","value","y","percentX","posX","percentY","posY","transform","translateX","translateY","scale","activeColorStyle","backgroundColor","brightnessImageStyle","rotate","onGestureUpdate","lengthX","lengthY","newSaturationValue","newBrightnessValue","onGestureBegin","event","duration","onGestureFinish","pan","Pan","onBegin","onUpdate","onEnd","tap","Tap","longPress","LongPress","composed","Simultaneous","Exclusive","onLayout","nativeEvent","layout","createElement","gesture","panel_container","position","borderWidth","padding","panel_image","source","require","tintColor","resizeMode","innerStyle"],"sources":["../../../src/components/Panels/Panel1.tsx"],"sourcesContent":["import React, { useCallback } from 'react';\nimport { Image, View } from 'react-native';\nimport { Gesture, GestureDetector } from 'react-native-gesture-handler';\nimport Animated, { useAnimatedStyle, useSharedValue, withTiming } from 'react-native-reanimated';\n\nimport usePickerContext from '../../AppContext';\nimport { styles } from '../../styles';\nimport Thumb from '../Thumb/Thumb';\nimport { clamp, getStyle, isRtl } from '../../utils';\n\nimport type { PanelProps } from '../../types';\nimport type { LayoutChangeEvent } from 'react-native';\nimport type { PanGestureHandlerEventPayload } from 'react-native-gesture-handler';\n\n/** - A square-shaped slider, reminiscent of Adobe style, is utilized to adjust the brightness and saturation of colors. */\nexport function Panel1({ gestures = [], style = {}, ...props }: PanelProps) {\n  const { hueValue, saturationValue, brightnessValue, onGestureChange, onGestureEnd, ...ctx } = usePickerContext();\n\n  const thumbShape = props.thumbShape ?? ctx.thumbShape,\n    thumbSize = props.thumbSize ?? ctx.thumbSize,\n    thumbColor = props.thumbColor ?? ctx.thumbColor,\n    boundedThumb = props.boundedThumb ?? ctx.boundedThumb,\n    renderThumb = props.renderThumb ?? ctx.renderThumb,\n    thumbStyle = props.thumbStyle ?? ctx.thumbStyle ?? {},\n    thumbScaleAnimationValue = props.thumbScaleUpValue ?? ctx.thumbScaleAnimationValue,\n    thumbScaleAnimationDuration = props.thumbScaleUpDuration ?? ctx.thumbScaleAnimationDuration,\n    thumbInnerStyle = props.thumbInnerStyle ?? ctx.thumbInnerStyle ?? {};\n\n  const borderRadius = getStyle(style, 'borderRadius') ?? 5;\n  const getHeight = getStyle(style, 'height') ?? 200;\n\n  const width = useSharedValue(0);\n  const height = useSharedValue(0);\n  const handleScale = useSharedValue(1);\n\n  const handleStyle = useAnimatedStyle(() => {\n    const length = { x: width.value - (boundedThumb ? thumbSize : 0), y: height.value - (boundedThumb ? thumbSize : 0) },\n      percentX = (saturationValue.value / 100) * length.x,\n      posX = percentX - (boundedThumb ? 0 : thumbSize / 2),\n      percentY = (brightnessValue.value / 100) * length.y,\n      posY = length.y - percentY - (boundedThumb ? 0 : thumbSize / 2);\n\n    return { transform: [{ translateX: posX }, { translateY: posY }, { scale: handleScale.value }] };\n  }, [handleScale, saturationValue, brightnessValue, width, height]);\n\n  const activeColorStyle = useAnimatedStyle(() => ({ backgroundColor: `hsl(${hueValue.value}, 100%, 50%)` }), [hueValue]);\n\n  const brightnessImageStyle = useAnimatedStyle(() => {\n    return {\n      width: height.value,\n      height: width.value,\n\n      transform: [\n        { rotate: '270deg' },\n        { translateX: (width.value - height.value) / 2 },\n        { translateY: ((width.value - height.value) / 2) * (isRtl ? -1 : 1) },\n      ],\n    };\n  }, [width, height]);\n\n  const onGestureUpdate = ({ x, y }: PanGestureHandlerEventPayload) => {\n    'worklet';\n\n    const lengthX = width.value - (boundedThumb ? thumbSize : 0),\n      lengthY = height.value - (boundedThumb ? thumbSize : 0),\n      posX = clamp(x - (boundedThumb ? thumbSize / 2 : 0), lengthX),\n      posY = clamp(y - (boundedThumb ? thumbSize / 2 : 0), lengthY),\n      newSaturationValue = (posX / lengthX) * 100,\n      newBrightnessValue = 100 - (posY / lengthY) * 100;\n\n    if (saturationValue.value === newSaturationValue && brightnessValue.value === newBrightnessValue) return;\n\n    saturationValue.value = newSaturationValue;\n    brightnessValue.value = newBrightnessValue;\n\n    onGestureChange();\n  };\n\n  const onGestureBegin = (event: PanGestureHandlerEventPayload) => {\n    'worklet';\n    handleScale.value = withTiming(thumbScaleAnimationValue, { duration: thumbScaleAnimationDuration });\n    onGestureUpdate(event);\n  };\n\n  const onGestureFinish = () => {\n    'worklet';\n    handleScale.value = withTiming(1, { duration: thumbScaleAnimationDuration });\n    onGestureEnd();\n  };\n\n  const pan = Gesture.Pan().onBegin(onGestureBegin).onUpdate(onGestureUpdate).onEnd(onGestureFinish);\n  const tap = Gesture.Tap().onEnd(onGestureFinish);\n  const longPress = Gesture.LongPress().onEnd(onGestureFinish);\n  const composed = Gesture.Simultaneous(Gesture.Exclusive(pan, tap, longPress), ...gestures);\n\n  const onLayout = useCallback(({ nativeEvent: { layout } }: LayoutChangeEvent) => {\n    width.value = layout.width;\n    height.value = layout.height;\n  }, []);\n\n  return (\n    <GestureDetector gesture={composed}>\n      <Animated.View\n        onLayout={onLayout}\n        style={[\n          styles.panel_container,\n          { height: getHeight },\n          style,\n          { position: 'relative', borderWidth: 0, padding: 0 },\n          activeColorStyle,\n        ]}\n      >\n        <View style={[styles.panel_image, { borderRadius }]}>\n          <Image\n            source={require('../../assets/blackGradient.png')}\n            style={[styles.panel_image, { tintColor: '#fff' }]}\n            resizeMode='stretch'\n          />\n          <Animated.Image\n            source={require('../../assets/blackGradient.png')}\n            style={[styles.panel_image, brightnessImageStyle]}\n            resizeMode='stretch'\n          />\n        </View>\n\n        <Thumb\n          thumbShape={thumbShape}\n          thumbSize={thumbSize}\n          thumbColor={thumbColor}\n          renderThumb={renderThumb}\n          innerStyle={thumbInnerStyle}\n          handleStyle={handleStyle}\n          style={thumbStyle}\n        />\n      </Animated.View>\n    </GestureDetector>\n  );\n}\n"],"mappings":"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"}